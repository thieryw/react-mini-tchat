(this["webpackJsonpreact-mini-tchat"]=this["webpackJsonpreact-mini-tchat"]||[]).push([[0],{32:function(e,t,n){e.exports=n(68)},37:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(30),c=n.n(s),u=(n(37),n(4)),i=function(e){var t=e.message;return a.a.createElement("div",{className:t.direction},a.a.createElement("em",null,"incoming"===t.direction?"received":"sent"),a.a.createElement("p",null,t.description))},o=n(31),l=function(e){var t=e.messages,n=e.evtMessageSent,s=Object(r.useReducer)((function(e){return e+1}),0),c=Object(u.a)(s,2)[1];return Object(o.useEvt)((function(e){n.attach(e,(function(){return c()}))}),[t,n]),a.a.createElement("div",{className:"message-wrapper"},t.map((function(e,t){return a.a.createElement(i,{key:t,message:e})})))},m=function(e){var t=e.user,n=e.store;return a.a.createElement("div",{className:"user"},a.a.createElement("h2",null,"User ",t.name),a.a.createElement(l,{evtMessageSent:n.evtMessageSent,messages:t.messages}))},p=n(13),v=function(e){var t=e.store,n=e.receiver,s=e.emitter,c=Object(r.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1],m=Object(p.b)(t.sendMessage),v=Object(r.useCallback)((function(e){e.preventDefault(),""!==o&&(m.execute({emitter:s,receiver:n,description:o}),l(""))}),[o,m,s,n]);return a.a.createElement("form",{onSubmit:v},a.a.createElement("input",{type:"text",value:o,onChange:Object(r.useCallback)((function(e){var t=e.target;return l(t.value)}),[])}),a.a.createElement("input",{type:"submit",value:"send message"}))},f=function(e){var t=e.store,n=Object(r.useState)(t.users[0]),s=Object(u.a)(n,2),c=s[0],i=s[1];return a.a.createElement("div",null,a.a.createElement("h1",null,"Tchat App"),a.a.createElement("input",{type:"button",value:"toggle user",onClick:Object(r.useCallback)((function(){return i(c===t.users[0]?t.users[1]:t.users[0])}),[t,c])}),a.a.createElement("div",{className:"users"},a.a.createElement(m,{store:t,user:t.users[0]}),a.a.createElement(m,{store:t,user:t.users[1]})),a.a.createElement(v,{emitter:c,receiver:c===t.users[0]?t.users[1]:t.users[0],store:t}))},g=n(8),d=n.n(g),E=n(18),b=n(12);function h(){return j.apply(this,arguments)}function j(){return(j=Object(E.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},n=[{messages:[],name:"User 1"},{name:"User 2",messages:[]}],r={evtMessageSent:b.Evt.create(),sendMessage:function(){var e=Object(E.a)(d.a.mark((function e(n){var a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(300);case 2:a=n.emitter,s=n.receiver,c=n.description,a.messages.push({description:c,direction:"outgoing"}),s.messages.push({description:c,direction:"incoming"}),r.evtMessageSent.post();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),users:n},e.next=5,t(1500);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){var e=Object(p.a)(h,[]);return void 0===e.result?a.a.createElement("h1",null,"Loading..."):a.a.createElement(f,{store:e.result})};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.c923a34a.chunk.js.map